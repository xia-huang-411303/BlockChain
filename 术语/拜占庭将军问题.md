拜占庭将军问题是Leslie Lamport（2013年的图灵讲得主）用来为描述**分布式系统一致性问题**（Distributed Consensus）在[论文](http://lamport.azurewebsites.net/pubs/byz.pdf)中抽象出来一个著名的例子。

这个例子大意是这样的：
拜占庭帝国想要进攻一个强大的敌人，为此派出了10支军队去包围这个敌人。这个敌人虽不比拜占庭帝国，但也足以抵御5支常规拜占庭军队的同时袭击。这10支军队在分开的包围状态下同时攻击。他们任一支军队单独进攻都毫无胜算，除非有至少6支军队（一半以上）同时袭击才能攻下敌国。他们分散在敌国的四周，依靠通信兵骑马相互通信来协商进攻意向及进攻时间。困扰这些将军的问题是，他们不确定他们中是否有叛徒，叛徒可能擅自变更进攻意向或者进攻时间。在这种状态下，拜占庭将军们才能保证有多于6支军队在同一时间一起发起进攻，从而赢取战斗？

拜占庭将军问题中并不去考虑通信兵是否会被截获或无法传达信息等问题，即消息传递的信道绝无问题。Lamport已经证明了在消息可能丢失的不可靠信道上试图通过消息传递的方式达到一致性是不可能的。所以，在研究拜占庭将军问题的时候，已经假定了信道是没有问题的.

单从上面的说明可能无法理解这个问题的复杂性，我们来简单分析一下：
1) 先看在没有叛徒情况下，假如一个将军A提一个进攻提议（如：明日下午1点进攻，你愿意加入吗？）由通信兵通信分别告诉其他的将军，如果幸运中的幸运，他收到了其他6位将军以上的同意，发起进攻。如果不幸，其他的将军也在此时发出不同的进攻提议（如：明日下午2点、3点进攻，你愿意加入吗？），由于时间上的差异，不同的将军收到（并认可）的进攻提议可能是不一样的，这是可能出现A提议有3个支持者，B提议有4个支持者，C提议有2个支持者等等。
2) 再加一点复杂性，在有叛徒情况下，一个叛徒会向不同的将军发出不同的进攻提议（通知A明日下午1点进攻， 通知B明日下午2点进攻等等），一个叛徒也会可能同意多个进攻提议（即同意下午1点进攻又同意下午2点进攻）。

叛徒发送前后不一致的进攻提议，被称为“拜占庭错误”，而能够处理拜占庭错误的这种容错性称为 Byzantine Fault Tolerance，简称为BFT。

在分布式计算中，不同的计算机通过通信交换信息达成共识而按照同一套协作策略行动。有时候，系统中的成员可能出错或故意发送错误信息，用于传递信息的通信网络也可能导致信息损坏，使得网络中不同的成员关于全体协作的策略得出不同结论，从而破坏系统一致性。拜占庭将军问题被认为是容错性问题中最难的问题之一。


### 这里对拜占庭将军问题稍作简化。
拜占庭帝国的将军们面对一个强大的敌人，不管进攻还是防守，只有将军们行动一致才能获得胜利。然而拜占庭地域宽广，每个将军带领的驻扎部队相距甚远，将军们需要通过信使来传递消息，而信使们都是准时且可靠的。然而众将军中有叛徒，叛徒会试图通过向不同的将军发送不同的消息，来阻挠忠诚的将军达成一致。
因此将军们希望通过投票达成行动的共识。具体的，由随机的一个将军充当发令将军首先发起号令，一个将军收到号令后立即通知其他将军自己收到的号令，等收到其他所有将军的消息后选择票数最多的号令执行，而不管是叛徒还是忠臣的军队都会严格执行投票的结果。
在投票的时候自己的号令不计算在内，若出现平票则进攻，由此保证众将军的行动一致。

以4个将军为例，当叛变者小于或等于1时，系统总能达成共识。
具体说明如下：将军A将信息传递给将军B、C、D，且传递一定有结果，消息简单分为进攻、防守两种，分别用0、1表示。
第一种情况，当发令将军A不是叛徒，而将军中有一个叛徒B。则会有以下情况：A的信息正确传递到B、C、D，B将错误的信息发送给C、D。消息传递结果如下表，最终每个节点都以多数0胜过了少数1，达成一致的进攻决议。
|收\\发|A|B|C|D|结果|
|--|--|--|--|--|--|
|A|X|0|0|0|0|
|B|0|X|0|0|0|
|C|0|1|X|0|0|
|D|0|1|0|X|0|
第二种情况，当发令将军A是叛徒时，A向B发送消息1，向C、D发送0。消息传递结果如下表，最终每个节点都以多数0胜过了少数1，达成一致的进攻决议。
|收\\发|A|B|C|D|结果|
|--|--|--|--|--|--|
|A|X|1|0|0|0|
|B|1|X|0|0|0|
|C|0|1|X|0|0|
|D|0|1|0|X|0|

